#!/bin/sh
#         @(#) tree      1.1  30/11/95       by Jordi Sanfeliu
#                                         email: mikaku@arrakis.es
#
#         Initial version:  1.0  30/11/95
#         Next version   :  1.1  24/02/97   ??? ??? ??
#         Patch by       :  Ian Kjos, ?? ? ?? ???? ??
#                           email: beth13@mail.utexas.edu
#
#         Tree ? ???? ??? ???? ????.(??? ????? :-) )
#

# ==> 'Tree' ? ???, Jordi Sanfeliu? ??? ??? ??? ??????.
# ==> HOWTO ??? ??? ??


search () {
   for dir in `echo *`
   # ==> `echo *` ? ?? ????? ?? ???? ? ?? ??? ???.
   # ==> for dir in *    ? ????.
   do
      if [ -d $dir ] ; then   # ==> ??????(-d)...
         zz=0   # ==> ???? ??? ?? ?? ?? ??
         while [ $zz != $deep ]   # ?? ????
         do
            echo -n "|   "    # ==> ?? ???? ??
	                      # ==> ??(indent)? ?? ?? ?? ?? ??? ? ?
            zz=`expr $zz + 1` # ==> zz ? ??.
         done
         if [ -L $dir ] ; then    # ==> ????? ??? ????...
            echo "+---$dir" `ls -l $dir | sed 's/^.*'$dir' //'`
	    # ==> ?? ???? ???? ??? ????? ? ??(long listing) 
		# ==> ??? ??/?? ??? ??
         else
            echo "+---$dir"    # ==> ?? ???? ???? ??? ??
            if cd $dir ; then  # ==> ?? ????? ??? ? ???...
               deep=`expr $deep + 1`   # ==> ??? ??
               search    # ?? ?? ;-)
	                 # ==> ?? ??? ??? ??
               numdirs=`expr $numdirs + 1`   # ==> ???? ??? ??
            fi
         fi
      fi
   done
   cd ..   # ==> ?? ????? ???
   if [ $deep ] ; then  # ==> depth = 0 ?? (?? ??)...
      swfi=1            # ==> ??? ???? ??? ???? ??
   fi
   deep=`expr $deep - 1`   # ==> ??? ??
}

# - ?? -
if [ $# = 0 ] ; then
   cd `pwd`    # ==> ???? ???? ?? ?????? ??
else
   cd $1       # ==> ???? ??? ????? ??
fi
echo "?? ???? = `pwd`"
swfi=0      # ==> ?? ?? ???
deep=0      # ==> ??? ??
numdirs=0
zz=0

while [ $swfi != 1 ]   # ???? ?? ? ? ???...
do
   search  # ==> ???? ????? ??? ??
done
echo "?? ???? ? = $numdirs"


